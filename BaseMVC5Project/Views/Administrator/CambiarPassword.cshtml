@model MigracionTalentoExtranjero.Models.Administrator.Login
@{

}
<div id="login">
    <h1 class="page-header text-center">Autenticación </h1>

    <div class="row">
        <div class="col-xs-8">
            <div class="panel panel-default">
                <div class="panel-heading">Cambiar Contraseña</div>
                <div class="panel-body">
                    @using (Html.BeginForm("GuardaNuevoPassword", "Administrator", FormMethod.Post, new { id = "frm-CambiaPwd" }))
                    {
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <div class="form-group">
                                    <label>Usuario</label>
                                    @Html.TextBoxFor(m => m.Username, new { @class = "form-control", type = "text", required = "required" })
                                    @*<input type="text" name="Usuario" class="form-control" placeholder="Ingrese su Usuario" id="usuario" required />*@
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <div class="form-group">
                                    <label>Contraseña</label>
                                    @Html.TextBoxFor(m => m.Password, new { @class = "form-control", type = "password", required = "required" })
                                    @*<input type="password" name="Password" class="form-control" placeholder="Ingrese su Password" id="password" required />*@
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="form-group">
                                    <label>Nueva Contraseña</label>
                                    @Html.TextBoxFor(m => m.NewPassword, new { @class = "form-control", type = "password", required = "required" })
                                    @*<input type="password" name="Password" class="form-control" placeholder="Ingrese su Password" id="password" required />*@
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="form-group">
                                    <label>Confirmar NuevaContraseña</label>
                                    @Html.TextBoxFor(m => m.ConfirmNewPassword, new { @class = "form-control", type = "password", required = "required" })
                                    @*<input type="password" name="Password" class="form-control" placeholder="Ingrese su Password" id="password" required />*@
                                </div>
                            </div>
                        </div>
                            <div class="text-left">
                                <button type="button" class="btn btn-primary" onclick="GuardaInformacion()">
                                    Guardar
                                </button>
                            </div>
                            <div>
                                <label>@Model.Mensaje</label>
                            </div>
                            }
                        </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

    document.addEventListener("DOMContentLoaded", function () {
        hideLoader();
        let data = '';

        document.getElementById("frm-CambiaPwd").addEventListener("submit", async function (e) {
            showLoader();
            e.preventDefault();

            console.log("Entro al evento submit prevent");

            
        });
    });

    async function GuardaInformacion() {
        let url = "@Url.Content("~/Administrator/GuardaNuevoPassword")";

        let Username = document.getElementById("Username").value;
        let Password = document.getElementById("Password").value;
        let NewPassword = document.getElementById("NewPassword").value;
        let ConfirmNewPassword = document.getElementById("ConfirmNewPassword").value;

        let params =
        {
            Username: Username,
            Password: Password,
            NewPassword: NewPassword,
            ConfirmNewPassword: ConfirmNewPassword,
        };

        let urlResultado = url;
        let methodNewView = 'POST';
        await postForm(urlResultado, params, methodNewView);
    }
</script>
